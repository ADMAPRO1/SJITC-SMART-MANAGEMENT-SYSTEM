<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SchoolSys - School Management Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font family -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap"
      rel="stylesheet"
    />

    <!-- Proper CSS Styles -->
    <style>
      /* Base Styles */
      body {
        font-family: "Inter", sans-serif;
        background-color: #f7f9fc;
        margin: 0;
        padding: 0;
      }

      /* Dashboard Content Scrollbar */
      .dashboard-content {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e1 #f1f5f9;
      }

      .dashboard-content::-webkit-scrollbar {
        width: 8px;
      }

      .dashboard-content::-webkit-scrollbar-track {
        background-color: #f1f5f9;
        border-radius: 10px;
      }

      .dashboard-content::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 10px;
      }

      /* Page Transition Effects */
      .page-content-transition {
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
      }

      /* Custom Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease-out forwards;
      }

      /* Chart Container */
      .chart-container {
        position: relative;
        height: 250px;
        width: 100%;
      }

      /* Card Hover Effects */
      .card-hover {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }

      /* Navigation Link Styles */
      .nav-link {
        display: flex;
        align-items: center;
        padding: 12px;
        border-radius: 12px;
        text-decoration: none;
        transition: all 0.15s ease;
        margin-bottom: 4px;
      }

      .nav-link-default {
        color: #4b5563;
        font-weight: 500;
        background-color: transparent;
      }

      .nav-link-default:hover {
        color: #4f46e5;
        background-color: #eef2ff;
      }

      .nav-link-active {
        color: white;
        font-weight: 600;
        background-color: #4f46e5;
        box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.3);
      }

      .nav-link-active:hover {
        background-color: #4338ca;
      }

      /* Dropdown Styles */
      .dropdown-menu {
        position: absolute;
        top: 64px;
        right: 16px;
        width: 320px;
        background-color: white;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        border-radius: 12px;
        border: 1px solid #e5e7eb;
        z-index: 40;
        display: none;
      }

      .user-dropdown {
        width: 192px;
      }

      .dropdown-header {
        padding: 16px;
        border-bottom: 1px solid #e5e7eb;
      }

      .dropdown-content {
        max-height: 320px;
        overflow-y: auto;
      }

      .dropdown-item {
        display: flex;
        align-items: center;
        padding: 8px 16px;
        color: #374151;
        text-decoration: none;
        border-radius: 8px;
        transition: background-color 0.15s ease;
      }

      .dropdown-item:hover {
        background-color: #f9fafb;
      }

      .dropdown-footer {
        padding: 12px;
        border-top: 1px solid #e5e7eb;
        text-align: center;
      }

      /* Status Badges */
      .status-badge {
        display: inline-flex;
        padding: 4px 8px;
        font-size: 12px;
        font-weight: 600;
        border-radius: 9999px;
        line-height: 1.25;
      }

      .status-present {
        background-color: #dcfce7;
        color: #166534;
      }

      .status-absent {
        background-color: #fef3c7;
        color: #92400e;
      }

      .status-on-loan {
        background-color: #dcfce7;
        color: #166534;
      }

      .status-overdue {
        background-color: #fee2e2;
        color: #991b1b;
      }

      /* Quick Action Buttons */
      .quick-action {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 16px;
        border-radius: 12px;
        transition: all 0.15s ease;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
      }

      .quick-action:hover {
        transform: scale(1.05);
      }

      .action-indigo {
        background-color: #eef2ff;
        color: #4f46e5;
      }

      .action-indigo:hover {
        background-color: #e0e7ff;
      }

      .action-green {
        background-color: #f0fdf4;
        color: #16a34a;
      }

      .action-green:hover {
        background-color: #dcfce7;
      }

      .action-yellow {
        background-color: #fefce8;
        color: #ca8a04;
      }

      .action-yellow:hover {
        background-color: #fef9c3;
      }

      .action-red {
        background-color: #fef2f2;
        color: #dc2626;
      }

      .action-red:hover {
        background-color: #fee2e2;
      }

      .action-purple {
        background-color: #faf5ff;
        color: #9333ea;
      }

      .action-purple:hover {
        background-color: #f3e8ff;
      }

      /* KPI Card Styles */
      .kpi-card {
        background-color: white;
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        border-left: 4px solid;
      }

      .kpi-indigo {
        border-left-color: #4f46e5;
      }

      .kpi-green {
        border-left-color: #10b981;
      }

      .kpi-yellow {
        border-left-color: #f59e0b;
      }

      .kpi-red {
        border-left-color: #ef4444;
      }

      /* Mobile Overlay */
      .mobile-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #111827;
        opacity: 0.5;
        z-index: 20;
        display: none;
      }

      /* Sidebar Styles */
      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        width: 256px;
        background-color: white;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        z-index: 30;
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
        border-right: 1px solid #e5e7eb;
      }

      .sidebar-open {
        transform: translateX(0);
      }

      /* Header Styles */
      .header {
        width: 100%;
        background-color: white;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        padding: 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-shrink: 0;
      }

      /* Table Styles */
      .data-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
      }

      .data-table th {
        background-color: #f9fafb;
        padding: 12px 24px;
        text-align: left;
        font-size: 12px;
        font-weight: 500;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .data-table td {
        padding: 16px 24px;
        border-bottom: 1px solid #e5e7eb;
      }

      .data-table tr:last-child td {
        border-bottom: none;
      }

      /* Responsive Design */
      @media (min-width: 1024px) {
        .sidebar {
          transform: translateX(0);
        }

        .mobile-overlay {
          display: none !important;
        }
      }

      @media (max-width: 768px) {
        .kpi-card {
          padding: 16px;
        }

        .data-table {
          font-size: 14px;
        }

        .data-table th,
        .data-table td {
          padding: 8px 12px;
        }
      }
    </style>
  </head>
  <body class="h-screen flex overflow-hidden">
    <!-- Mobile Menu Overlay -->
    <div
      id="sidebar-overlay"
      class="mobile-overlay lg:hidden"
      onclick="toggleSidebar()"
    ></div>

    <!-- Sidebar Navigation -->
    <aside id="sidebar" class="sidebar lg:sidebar-open">
      <div
        class="p-6 flex items-center justify-center border-b border-gray-100"
      >
        <svg
          class="w-8 h-8 text-indigo-600 mr-2"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 14l9-5-9-5-9 5 9 5z"
          ></path>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.659-6.445L12 14z"
          ></path>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 14l9-5-9-5-9 5 9 5z"
          ></path>
        </svg>
        <span class="text-xl font-extrabold text-gray-800">SchoolSys</span>
      </div>

      <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
        <a
          href="#"
          data-page="Dashboard"
          onclick="loadPage(this.dataset.page)"
          class="nav-link nav-link-active"
        >
          <svg
            class="w-5 h-5 mr-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
            ></path>
          </svg>
          <span>Dashboard</span>
        </a>
        <a
          href="#"
          data-page="Students"
          onclick="loadPage(this.dataset.page)"
          class="nav-link nav-link-default"
        >
          <svg
            class="w-5 h-5 mr-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20v-2c0-.656-.126-1.283-.356-1.857m0 0a5.002 5.002 0 019.288 0M11 10a5 5 0 015-5V4a1 1 0 00-1-1H9a1 1 0 00-1 1v1a5 5 0 015 5z"
            ></path>
          </svg>
          <span>Students</span>
        </a>
        <a
          href="#"
          data-page="Staff & Teachers"
          onclick="loadPage(this.dataset.page)"
          class="nav-link nav-link-default"
        >
          <svg
            class="w-5 h-5 mr-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.146M11 12h-2m-2-2h4"
            ></path>
          </svg>
          <span>Staff & Teachers</span>
        </a>
        <a
          href="#"
          data-page="Classes & Subjects"
          onclick="loadPage(this.dataset.page)"
          class="nav-link nav-link-default"
        >
          <svg
            class="w-5 h-5 mr-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.247m0-13C13.168 5.477 14.754 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18s-3.332.477-4.5 1.247"
            ></path>
          </svg>
          <span>Classes & Subjects</span>
        </a>
        <a
          href="#"
          data-page="Attendance"
          onclick="loadPage(this.dataset.page)"
          class="nav-link nav-link-default"
        >
          <svg
            class="w-5 h-5 mr-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"
            ></path>
          </svg>
          <span>Attendance</span>
        </a>
        <a
          href="#"
          data-page="Reports"
          onclick="loadPage(this.dataset.page)"
          class="nav-link nav-link-default"
        >
          <svg
            class="w-5 h-5 mr-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
            ></path>
          </svg>
          <span>Reports</span>
        </a>
        <a
          href="#"
          data-page="Library"
          onclick="loadPage(this.dataset.page)"
          class="nav-link nav-link-default"
        >
          <svg
            class="w-5 h-5 mr-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.247m0-13C13.168 5.477 14.754 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18s-3.332.477-4.5 1.247"
            ></path>
          </svg>
          <span>Library</span>
        </a>
        <a
          href="#"
          data-page="SMS"
          onclick="loadPage(this.dataset.page)"
          class="nav-link nav-link-default"
        >
          <svg
            class="w-5 h-5 mr-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
            ></path>
          </svg>
          <span>SMS</span>
        </a>
      </nav>
      <div class="p-4 border-t border-gray-100">
        <a
          href="#"
          onclick="logout()"
          class="nav-link nav-link-default hover:text-red-600 hover:bg-red-50"
        >
          <svg
            class="w-5 h-5 mr-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
            ></path>
          </svg>
          <span>Logout</span>
        </a>
      </div>
    </aside>

    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col overflow-hidden">
      <!-- Header/Top Bar -->
      <header class="header">
        <!-- Mobile Menu Button -->
        <button
          id="menu-button"
          class="lg:hidden p-2 rounded-full text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"
          onclick="toggleSidebar()"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            ></path>
          </svg>
        </button>

        <h1
          id="page-title"
          class="text-2xl font-bold text-gray-800 hidden sm:block"
        >
          Admin Dashboard
        </h1>

        <!-- User Profile and Notifications -->
        <div class="flex items-center space-x-4">
          <button
            id="notification-btn"
            class="p-2 rounded-full text-gray-600 hover:bg-gray-100 focus:outline-none relative"
            onclick="toggleNotifications()"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
              ></path>
            </svg>
            <span
              class="absolute top-0 right-0 block h-2 w-2 rounded-full ring-2 ring-white bg-red-400"
            ></span>
          </button>

          <!-- Notifications Dropdown -->
          <div id="notifications-dropdown" class="dropdown-menu">
            <div class="dropdown-header">
              <h3 class="font-semibold text-gray-800">Notifications</h3>
            </div>
            <div class="dropdown-content">
              <div
                class="p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer"
              >
                <p class="text-sm font-medium text-gray-800">
                  Umwarimu mushya
                </p>
                <p class="text-xs text-gray-500 mt-1">iminota 2 ishize</p>
              </div>
              <div
                class="p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer"
              >
                <p class="text-sm font-medium text-gray-800">
                  New student registration
                </p>
                <p class="text-xs text-gray-500 mt-1">5 minutes ago</p>
              </div>
              <div
                class="p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer"
              >
                <p class="text-sm font-medium text-gray-800">
                  Library book overdue
                </p>
                <p class="text-xs text-gray-500 mt-1">2 hours ago</p>
              </div>
              <div
                class="p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer"
              >
                <p class="text-sm font-medium text-gray-800">
                  Staff meeting reminder
                </p>
                <p class="text-xs text-gray-500 mt-1">Yesterday</p>
              </div>
            </div>
            <div class="dropdown-footer">
              <a
                href="#"
                class="text-sm text-indigo-600 font-medium hover:text-indigo-800"
                >View All Notifications</a
              >
            </div>
          </div>

          <div
            class="flex items-center space-x-2 cursor-pointer"
            onclick="toggleUserMenu()"
          >
            <img
              class="w-10 h-10 rounded-full object-cover"
              src="https://placehold.co/40x40/4f46e5/ffffff?text=DM"
              alt="Admin Avatar"
            />
            <div class="hidden md:block">
              <p class="text-sm font-semibold text-gray-800">Dieu Merci</p>
              <p class="text-xs text-gray-500">Administrator</p>
            </div>
          </div>

          <!-- User Menu Dropdown -->
          <div id="user-menu" class="dropdown-menu user-dropdown">
            <div class="p-2">
              <a href="#" class="dropdown-item">
                <svg
                  class="w-4 h-4 mr-3"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                  ></path>
                </svg>
                My Profile
              </a>
              <a href="#" class="dropdown-item">
                <svg
                  class="w-4 h-4 mr-3"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                </svg>
                Settings
              </a>
              <div class="border-t border-gray-200 my-1"></div>
              <a
                href="#"
                onclick="logout()"
                class="dropdown-item text-red-600 hover:bg-red-50"
              >
                <svg
                  class="w-4 h-4 mr-3"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                  ></path>
                </svg>
                Logout
              </a>
            </div>
          </div>
        </div>
      </header>

      <!-- Main Content Injection Area -->
      <main
        id="content-area"
        class="flex-1 overflow-y-auto dashboard-content p-4 sm:p-6 md:p-8"
      >
        <!-- Dashboard content will be loaded here by JavaScript -->
      </main>
    </div>

    <script>
      // Page Content Templates
      const dashboardContent = `
            <h2 class="text-3xl font-extrabold text-gray-900 mb-6 fade-in">Welcome back, Merci!</h2>

            <!-- KPI Cards Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- KPI Card 1: Total Students -->
                <div class="kpi-card kpi-indigo card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Total Students</p>
                            <p class="text-3xl font-bold text-gray-900 mt-1">1,452</p>
                        </div>
                        <svg class="w-10 h-10 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20v-2c0-.656-.126-1.283-.356-1.857m0 0a5.002 5.002 0 019.288 0M11 10a5 5 0 015-5V4a1 1 0 00-1-1H9a1 1 0 00-1 1v1a5 5 0 015 5z"></path>
                        </svg>
                    </div>
                    <p class="text-xs text-green-500 mt-3 font-medium">+12% Since Last Year</p>
                </div>

                <!-- KPI Card 2: Total Staff -->
                <div class="kpi-card kpi-green card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Total Staff</p>
                            <p class="text-3xl font-bold text-gray-900 mt-1">98</p>
                        </div>
                        <svg class="w-10 h-10 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.146M11 12h-2m-2-2h4"></path>
                        </svg>
                    </div>
                    <p class="text-xs text-red-500 mt-3 font-medium">-1% Since Last Year</p>
                </div>

                <!-- KPI Card 3: Today's Attendance -->
                <div class="kpi-card kpi-yellow card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Today's Attendance</p>
                            <p class="text-3xl font-bold text-gray-900 mt-1">96.8%</p>
                        </div>
                        <svg class="w-10 h-10 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                        </svg>
                    </div>
                    <p class="text-xs text-yellow-600 mt-3 font-medium">Goal: 97.5%</p>
                </div>

                <!-- KPI Card 4: Unpaid Fees -->
                <div class="kpi-card kpi-red card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Unpaid Fees</p>
                            <p class="text-3xl font-bold text-gray-900 mt-1">$45,210</p>
                        </div>
                        <svg class="w-10 h-10 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8V9m0 3v4m-4-4h8m-1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <p class="text-xs text-red-500 mt-3 font-medium">Action Required</p>
                </div>
            </div>

            <!-- Main Content Grid (Charts, Events, Announcements) -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Left Column (Chart) -->
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg card-hover">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Student Enrollment Trend</h3>
                    <!-- Simple Line Chart Simulation -->
                    <div class="chart-container">
                        <svg viewBox="0 0 100 50" class="w-full h-full">
                            <!-- X Axis -->
                            <line x1="0" y1="45" x2="100" y2="45" stroke="#e5e7eb" stroke-width="0.5"/>
                            <!-- Y Axis -->
                            <line x1="5" y1="5" x2="5" y2="45" stroke="#e5e7eb" stroke-width="0.5"/>
                            <!-- Line Data Path -->
                            <polyline fill="none" stroke="#4f46e5" stroke-width="1"
                                points="5,40 15,25 25,35 35,20 45,30 55,15 65,35 75,10 85,25 95,18"
                                class="transition-all duration-1000 ease-out"/>
                            <!-- Fill Area (Gradient for Aesthetics) -->
                            <defs>
                                <linearGradient id="areaGradient" x1="0" x2="0" y1="0" y2="1">
                                    <stop offset="0%" stop-color="#4f46e5" stop-opacity="0.3"/>
                                    <stop offset="100%" stop-color="#ffffff" stop-opacity="0.1"/>
                                </linearGradient>
                            </defs>
                            <path fill="url(#areaGradient)"
                                d="M5,40 L15,25 25,35 35,20 45,30 55,15 65,35 75,10 85,25 95,18 L95,45 L5,45 Z"/>
                            <!-- Data Points -->
                            <circle cx="5" cy="40" r="1.5" fill="#4f46e5"/>
                            <circle cx="15" cy="25" r="1.5" fill="#4f46e5"/>
                            <circle cx="25" cy="35" r="1.5" fill="#4f46e5"/>
                            <circle cx="35" cy="20" r="1.5" fill="#4f46e5"/>
                            <circle cx="45" cy="30" r="1.5" fill="#4f46e5"/>
                            <circle cx="55" cy="15" r="1.5" fill="#4f46e5"/>
                            <circle cx="65" cy="35" r="1.5" fill="#4f46e5"/>
                            <circle cx="75" cy="10" r="1.5" fill="#4f46e5"/>
                            <circle cx="85" cy="25" r="1.5" fill="#4f46e5"/>
                            <circle cx="95" cy="18" r="1.5" fill="#4f46e5"/>
                        </svg>
                        <div class="flex justify-between text-xs text-gray-500 mt-2">
                            <span>Jan</span><span>Feb</span><span>Mar</span><span>Apr</span><span>May</span><span>Jun</span><span>Jul</span><span>Aug</span><span>Sep</span><span>Oct</span>
                        </div>
                    </div>
                </div>

                <!-- Right Column (Events and Announcements) -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Upcoming Events -->
                    <div class="bg-white p-6 rounded-xl shadow-lg card-hover">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Upcoming Events</h3>
                        <ul class="space-y-4">
                            <!-- Event 1 -->
                            <li class="flex items-start space-x-3">
                                <div class="flex-shrink-0 bg-indigo-100 text-indigo-600 p-2 rounded-lg font-bold text-center">
                                    <span class="block text-xs leading-none">OCT</span>
                                    <span class="block text-lg leading-none">15</span>
                                </div>
                                <div>
                                    <p class="text-sm font-semibold text-gray-800">Parent-Teacher Conference</p>
                                    <p class="text-xs text-gray-500">1:00 PM - 5:00 PM, Main Hall</p>
                                </div>
                            </li>
                            <!-- Event 2 -->
                            <li class="flex items-start space-x-3">
                                <div class="flex-shrink-0 bg-green-100 text-green-600 p-2 rounded-lg font-bold text-center">
                                    <span class="block text-xs leading-none">NOV</span>
                                    <span class="block text-lg leading-none">05</span>
                                </div>
                                <div>
                                    <p class="text-sm font-semibold text-gray-800">Annual Sports Day</p>
                                    <p class="text-xs text-gray-500">All Day, School Field</p>
                                </div>
                            </li>
                            <!-- Event 3 -->
                            <li class="flex items-start space-x-3">
                                <div class="flex-shrink-0 bg-yellow-100 text-yellow-600 p-2 rounded-lg font-bold text-center">
                                    <span class="block text-xs leading-none">NOV</span>
                                    <span class="block text-lg leading-none">20</span>
                                </div>
                                <div>
                                    <p class="text-sm font-semibold text-gray-800">Staff Training Workshop</p>
                                    <p class="text-xs text-gray-500">9:00 AM, Library</p>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!-- Recent Announcements -->
                    <div class="bg-white p-6 rounded-xl shadow-lg card-hover">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Recent Announcements</h3>
                        <div class="space-y-3">
                            <div class="border-l-4 border-blue-500 p-3 bg-blue-50 rounded-md">
                                <p class="text-sm font-medium text-blue-800">New Exam Schedule Posted</p>
                                <p class="text-xs text-blue-600 mt-1">Check the 'Reports' section for details.</p>
                            </div>
                            <div class="border-l-4 border-purple-500 p-3 bg-purple-50 rounded-md">
                                <p class="text-sm font-medium text-purple-800">Library Closure Reminder</p>
                                <p class="text-xs text-purple-600 mt-1">Closed for inventory on 10/05.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="mt-8 bg-white p-6 rounded-xl shadow-lg card-hover">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Quick Actions</h3>
                <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4">
                    <button class="quick-action action-indigo">
                        <svg class="w-8 h-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="text-sm font-medium">Add Student</span>
                    </button>
                    <button class="quick-action action-green">
                        <svg class="w-8 h-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                        </svg>
                        <span class="text-sm font-medium">Take Attendance</span>
                    </button>
                    <button class="quick-action action-yellow">
                        <svg class="w-8 h-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                        </svg>
                        <span class="text-sm font-medium">Post Grade</span>
                    </button>
                    <button class="quick-action action-red">
                        <svg class="w-8 h-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8V9m0 3v4m-4-4h8m-1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="text-sm font-medium">View Fees</span>
                    </button>
                    <button class="quick-action action-purple">
                        <svg class="w-8 h-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.247m0-13C13.168 5.477 14.754 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18s-3.332.477-4.5 1.247"></path>
                        </svg>
                        <span class="text-sm font-medium">Library Books</span>
                    </button>
                </div>
            </div>

            <footer class="mt-8 text-center text-xs text-gray-500 py-4 border-t border-gray-200">
                &copy; 2024 SchoolSys. All Rights Reserved.
            </footer>
        `;

      // Students data
      let students = JSON.parse(localStorage.getItem("students")) || [
        {
          id: "S0014",
          name: "Alice Johnson",
          class: "Grade 10",
          attendance: 98,
        },
        { id: "S0022", name: "Ben Carter", class: "Grade 9", attendance: 91 },
      ];

      // Staff data
      let staff = JSON.parse(localStorage.getItem("staff")) || [
        {
          id: "T01",
          name: "Mr. John Kelly",
          department: "Math",
          role: "Head of Department",
        },
        {
          id: "T05",
          name: "Ms. Amelia Smith",
          department: "English",
          role: "Teacher",
        },
        {
          id: "A12",
          name: "Mrs. Maria Perez",
          department: "Admin",
          role: "Secretary",
        },
      ];

      // Classes data
      let classes = JSON.parse(localStorage.getItem("classes")) || [
        {
          id: "C001",
          name: "Grade 9 A",
          subject: "English Literature",
          teacher: "Ms. Smith",
          students: 30,
        },
        {
          id: "C002",
          name: "Grade 11 B",
          subject: "AP Calculus",
          teacher: "Mr. Kelly",
          students: 25,
        },
      ];

      // Attendance data
      let attendanceRecords = JSON.parse(
        localStorage.getItem("attendanceRecords")
      ) || [
        { date: "2024-10-01", class: "Grade 10", present: 120, absent: 2 },
        { date: "2024-10-01", class: "Grade 9", present: 115, absent: 10 },
      ];

      // Library data
      let libraryBooks = JSON.parse(localStorage.getItem("libraryBooks")) || [
        {
          id: "B001",
          title: "The Great Gatsby",
          author: "F. Scott Fitzgerald",
          status: "Available",
        },
        {
          id: "B002",
          title: "A Brief History of Time",
          author: "Stephen Hawking",
          status: "Borrowed",
        },
      ];

      let borrowedBooks = JSON.parse(localStorage.getItem("borrowedBooks")) || [
        {
          bookId: "B002",
          borrowerId: "T005",
          borrowerName: "Ms. Amelia Smith",
          dueDate: "2024-10-15",
        },
      ];

      function saveStudents() {
        localStorage.setItem("students", JSON.stringify(students));
      }

      function saveStaff() {
        localStorage.setItem("staff", JSON.stringify(staff));
      }

      function saveClasses() {
        localStorage.setItem("classes", JSON.stringify(classes));
      }

      function saveAttendance() {
        localStorage.setItem(
          "attendanceRecords",
          JSON.stringify(attendanceRecords)
        );
      }

      function saveLibrary() {
        localStorage.setItem("libraryBooks", JSON.stringify(libraryBooks));
        localStorage.setItem("borrowedBooks", JSON.stringify(borrowedBooks));
      }

      function renderStudentsTable() {
        const tbody = document.querySelector("#students-table tbody");
        if (!tbody) return;
        tbody.innerHTML = "";
        students.forEach((student, index) => {
          const row = document.createElement("tr");
          row.innerHTML = `
                    <td class="font-medium text-gray-900">${student.name}</td>
                    <td class="text-gray-500">${student.id}</td>
                    <td class="text-gray-500">${student.class}</td>
                    <td><span class="status-badge ${
                      student.attendance >= 95
                        ? "status-present"
                        : "status-absent"
                    }">${student.attendance}%</span></td>
                    <td class="font-medium space-x-2">
                        <button class="text-indigo-600 hover:text-indigo-900" onclick="viewStudent(${index})">View</button>
                        <button class="text-indigo-600 hover:text-indigo-900" onclick="editStudent(${index})">Edit</button>
                        <button class="text-red-600 hover:text-red-900" onclick="deleteStudent(${index})">Delete</button>
                    </td>
                `;
          tbody.appendChild(row);
        });
      }

      function renderStaffTable() {
        const tbody = document.querySelector("#staff-table tbody");
        if (!tbody) return;
        tbody.innerHTML = "";
        staff.forEach((member, index) => {
          const row = document.createElement("tr");
          row.innerHTML = `
                    <td class="font-medium text-gray-900">${member.name}</td>
                    <td class="text-gray-500">${member.id}</td>
                    <td class="text-gray-500">${member.department}</td>
                    <td class="text-gray-500">${member.role}</td>
                    <td class="font-medium space-x-2">
                        <button class="text-indigo-600 hover:text-indigo-900" onclick="viewStaff(${index})">View</button>
                        <button class="text-indigo-600 hover:text-indigo-900" onclick="editStaff(${index})">Edit</button>
                        <button class="text-red-600 hover:text-red-900" onclick="deleteStaff(${index})">Delete</button>
                    </td>
                `;
          tbody.appendChild(row);
        });
      }

      function renderClassesTable() {
        const tbody = document.querySelector("#classes-table tbody");
        if (!tbody) return;
        tbody.innerHTML = "";
        classes.forEach((cls, index) => {
          const row = document.createElement("tr");
          row.innerHTML = `
                    <td class="font-medium text-gray-900">${cls.name}</td>
                    <td class="text-gray-500">${cls.subject}</td>
                    <td class="text-blue-600 font-medium">${cls.teacher}</td>
                    <td class="text-gray-500">${cls.students}</td>
                    <td class="font-medium space-x-2">
                        <button class="text-indigo-600 hover:text-indigo-900" onclick="viewClass(${index})">View</button>
                        <button class="text-indigo-600 hover:text-indigo-900" onclick="editClass(${index})">Edit</button>
                        <button class="text-red-600 hover:text-red-900" onclick="deleteClass(${index})">Delete</button>
                    </td>
                `;
          tbody.appendChild(row);
        });
      }

      function renderAttendanceTable() {
        const tbody = document.querySelector("#attendance-table tbody");
        if (!tbody) return;
        tbody.innerHTML = "";
        attendanceRecords.forEach((record, index) => {
          const row = document.createElement("tr");
          row.innerHTML = `
                    <td class="font-medium text-gray-900">${record.date}</td>
                    <td class="text-gray-500">${record.class}</td>
                    <td class="text-green-600 font-medium">${
                      record.present
                    } / ${record.present + record.absent}</td>
                    <td class="text-red-600">${record.absent}</td>
                    <td class="font-medium space-x-2">
                        <button class="text-indigo-600 hover:text-indigo-900" onclick="viewAttendance(${index})">View</button>
                        <button class="text-indigo-600 hover:text-indigo-900" onclick="editAttendance(${index})">Edit</button>
                        <button class="text-red-600 hover:text-red-900" onclick="deleteAttendance(${index})">Delete</button>
                    </td>
                `;
          tbody.appendChild(row);
        });
      }

      function renderLibraryTable() {
        const tbody = document.querySelector("#library-table tbody");
        if (!tbody) return;
        tbody.innerHTML = "";
        libraryBooks.forEach((book, index) => {
          const row = document.createElement("tr");
          row.innerHTML = `
                    <td class="font-medium text-gray-900">${book.title}</td>
                    <td class="text-gray-500">${book.author}</td>
                    <td><span class="status-badge ${
                      book.status === "Available"
                        ? "status-present"
                        : "status-on-loan"
                    }">${book.status}</span></td>
                    <td class="font-medium space-x-2">
                        <button class="text-indigo-600 hover:text-indigo-900" onclick="viewBook(${index})">View</button>
                        <button class="text-indigo-600 hover:text-indigo-900" onclick="editBook(${index})">Edit</button>
                        <button class="text-red-600 hover:text-red-900" onclick="deleteBook(${index})">Delete</button>
                    </td>
                `;
          tbody.appendChild(row);
        });
      }

      function openAddStudentModal() {
        document.getElementById("student-modal").style.display = "block";
        document.getElementById("student-form").reset();
        document.getElementById("modal-title").textContent = "Add New Student";
        document.getElementById("student-form").dataset.editIndex = "";
      }

      function closeStudentModal() {
        document.getElementById("student-modal").style.display = "none";
      }

      function openAddStaffModal() {
        document.getElementById("staff-modal").style.display = "block";
        document.getElementById("staff-form").reset();
        document.getElementById("staff-modal-title").textContent =
          "Add New Staff";
        document.getElementById("staff-form").dataset.editIndex = "";
      }

      function closeStaffModal() {
        document.getElementById("staff-modal").style.display = "none";
      }

      function openAddClassModal() {
        document.getElementById("class-modal").style.display = "block";
        document.getElementById("class-form").reset();
        document.getElementById("class-modal-title").textContent =
          "Add New Class";
        document.getElementById("class-form").dataset.editIndex = "";
      }

      function closeClassModal() {
        document.getElementById("class-modal").style.display = "none";
      }

      function openAddAttendanceModal() {
        document.getElementById("attendance-modal").style.display = "block";
        document.getElementById("attendance-form").reset();
        document.getElementById("attendance-modal-title").textContent =
          "Record Attendance";
        document.getElementById("attendance-form").dataset.editIndex = "";
      }

      function closeAttendanceModal() {
        document.getElementById("attendance-modal").style.display = "none";
      }

      function openAddBookModal() {
        document.getElementById("book-modal").style.display = "block";
        document.getElementById("book-form").reset();
        document.getElementById("book-modal-title").textContent =
          "Add New Book";
        document.getElementById("book-form").dataset.editIndex = "";
      }

      function closeBookModal() {
        document.getElementById("book-modal").style.display = "none";
      }

      function viewStudent(index) {
        const student = students[index];
        alert(
          `Name: ${student.name}\nID: ${student.id}\nClass: ${student.class}\nAttendance: ${student.attendance}%`
        );
      }

      function editStudent(index) {
        const student = students[index];
        document.getElementById("student-name").value = student.name;
        document.getElementById("student-id").value = student.id;
        document.getElementById("student-class").value = student.class;
        document.getElementById("student-attendance").value =
          student.attendance;
        document.getElementById("modal-title").textContent = "Edit Student";
        document.getElementById("student-form").dataset.editIndex = index;
        document.getElementById("student-modal").style.display = "block";
      }

      function deleteStudent(index) {
        if (confirm("Are you sure you want to delete this student?")) {
          students.splice(index, 1);
          saveStudents();
          renderStudentsTable();
        }
      }

      function viewStaff(index) {
        const member = staff[index];
        alert(
          `Name: ${member.name}\nID: ${member.id}\nDepartment: ${member.department}\nRole: ${member.role}`
        );
      }

      function editStaff(index) {
        const member = staff[index];
        document.getElementById("staff-name").value = member.name;
        document.getElementById("staff-id").value = member.id;
        document.getElementById("staff-department").value = member.department;
        document.getElementById("staff-role").value = member.role;
        document.getElementById("staff-modal-title").textContent = "Edit Staff";
        document.getElementById("staff-form").dataset.editIndex = index;
        document.getElementById("staff-modal").style.display = "block";
      }

      function deleteStaff(index) {
        if (confirm("Are you sure you want to delete this staff member?")) {
          staff.splice(index, 1);
          saveStaff();
          renderStaffTable();
        }
      }

      function viewClass(index) {
        const cls = classes[index];
        alert(
          `Name: ${cls.name}\nSubject: ${cls.subject}\nTeacher: ${cls.teacher}\nStudents: ${cls.students}`
        );
      }

      function editClass(index) {
        const cls = classes[index];
        document.getElementById("class-name").value = cls.name;
        document.getElementById("class-subject").value = cls.subject;
        document.getElementById("class-teacher").value = cls.teacher;
        document.getElementById("class-students").value = cls.students;
        document.getElementById("class-modal-title").textContent = "Edit Class";
        document.getElementById("class-form").dataset.editIndex = index;
        document.getElementById("class-modal").style.display = "block";
      }

      function deleteClass(index) {
        if (confirm("Are you sure you want to delete this class?")) {
          classes.splice(index, 1);
          saveClasses();
          renderClassesTable();
        }
      }

      function viewAttendance(index) {
        const record = attendanceRecords[index];
        alert(
          `Date: ${record.date}\nClass: ${record.class}\nPresent: ${record.present}\nAbsent: ${record.absent}`
        );
      }

      function editAttendance(index) {
        const record = attendanceRecords[index];
        document.getElementById("attendance-date").value = record.date;
        document.getElementById("attendance-class").value = record.class;
        document.getElementById("attendance-present").value = record.present;
        document.getElementById("attendance-absent").value = record.absent;
        document.getElementById("attendance-modal-title").textContent =
          "Edit Attendance";
        document.getElementById("attendance-form").dataset.editIndex = index;
        document.getElementById("attendance-modal").style.display = "block";
      }

      function deleteAttendance(index) {
        if (
          confirm("Are you sure you want to delete this attendance record?")
        ) {
          attendanceRecords.splice(index, 1);
          saveAttendance();
          renderAttendanceTable();
        }
      }

      function viewBook(index) {
        const book = libraryBooks[index];
        alert(
          `Title: ${book.title}\nAuthor: ${book.author}\nStatus: ${book.status}`
        );
      }

      function editBook(index) {
        const book = libraryBooks[index];
        document.getElementById("book-title").value = book.title;
        document.getElementById("book-author").value = book.author;
        document.getElementById("book-status").value = book.status;
        document.getElementById("book-modal-title").textContent = "Edit Book";
        document.getElementById("book-form").dataset.editIndex = index;
        document.getElementById("book-modal").style.display = "block";
      }

      function deleteBook(index) {
        if (confirm("Are you sure you want to delete this book?")) {
          libraryBooks.splice(index, 1);
          saveLibrary();
          renderLibraryTable();
        }
      }

      const studentsContent = `
            <h2 class="text-3xl font-extrabold text-gray-900 mb-6 fade-in">Students Management</h2>
            <div class="bg-white p-6 rounded-xl shadow-lg mb-8 card-hover">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-3 sm:space-y-0">
                    <input type="text" placeholder="Search by name, ID, or class..." class="p-2 border border-gray-300 rounded-xl w-full sm:w-80 focus:ring-indigo-500 focus:border-indigo-500 transition duration-150">
                    <button class="bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 transition duration-150 flex items-center shadow-md" onclick="openAddStudentModal()">
                        <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Add New Student
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <table id="students-table" class="data-table">
                        <thead>
                            <tr>
                                <th class="rounded-tl-xl">Student Name</th>
                                <th>ID</th>
                                <th>Class</th>
                                <th>Attendance</th>
                                <th class="rounded-tr-xl">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Student Modal -->
            <div id="student-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
                <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
                    <div class="mt-3">
                        <h3 id="modal-title" class="text-lg font-medium text-gray-900 mb-4">Add New Student</h3>
                        <form id="student-form">
                            <div class="mb-4">
                                <label for="student-name" class="block text-sm font-medium text-gray-700">Name</label>
                                <input type="text" id="student-name" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                            </div>
                            <div class="mb-4">
                                <label for="student-id" class="block text-sm font-medium text-gray-700">ID</label>
                                <input type="text" id="student-id" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                            </div>
                            <div class="mb-4">
                                <label for="student-class" class="block text-sm font-medium text-gray-700">Class</label>
                                <input type="text" id="student-class" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                            </div>
                            <div class="mb-4">
                                <label for="student-attendance" class="block text-sm font-medium text-gray-700">Attendance (%)</label>
                                <input type="number" id="student-attendance" min="0" max="100" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                            </div>
                            <div class="flex justify-end space-x-3">
                                <button type="button" onclick="closeStudentModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">Cancel</button>
                                <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">Save</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Delete Confirmation Modal -->
            <div id="delete-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
                <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
                    <div class="mt-3">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Confirm Delete</h3>
                        <p class="text-sm text-gray-500 mb-4">Are you sure you want to delete this student? This action cannot be undone.</p>
                        <div class="flex justify-end space-x-3">
                            <button onclick="closeDeleteModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">Cancel</button>
                            <button id="confirm-delete" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">Delete</button>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="mt-8 text-center text-xs text-gray-500 py-4 border-t border-gray-200">
                &copy; 2024 SchoolSys. All Rights Reserved.
            </footer>
        `;

      const staffContent = `
            <h2 class="text-3xl font-extrabold text-gray-900 mb-6 fade-in">Staff & Teacher Roster</h2>
            <div class="bg-white p-6 rounded-xl shadow-lg mb-8 card-hover">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-3 sm:space-y-0">
                    <input type="text" placeholder="Search by name or department..." class="p-2 border border-gray-300 rounded-xl w-full sm:w-80 focus:ring-indigo-500 focus:border-indigo-500 transition duration-150" id="staff-search">
                    <button class="bg-green-600 text-white p-3 rounded-xl hover:bg-green-700 transition duration-150 flex items-center shadow-md" onclick="openAddStaffModal()">
                        <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Add New Staff
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <table id="staff-table" class="data-table">
                        <thead>
                            <tr>
                                <th class="rounded-tl-xl">Name</th>
                                <th>ID</th>
                                <th>Department</th>
                                <th>Role</th>
                                <th class="rounded-tr-xl">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Staff Modal -->
            <div id="staff-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
                <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
                    <div class="mt-3">
                        <h3 id="staff-modal-title" class="text-lg font-medium text-gray-900 mb-4">Add New Staff</h3>
                        <form id="staff-form">
                            <div class="mb-4">
                                <label for="staff-name" class="block text-sm font-medium text-gray-700">Name</label>
                                <input type="text" id="staff-name" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                            </div>
                            <div class="mb-4">
                                <label for="staff-id" class="block text-sm font-medium text-gray-700">ID</label>
                                <input type="text" id="staff-id" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                            </div>
                            <div class="mb-4">
                                <label for="staff-department" class="block text-sm font-medium text-gray-700">Department</label>
                                <input type="text" id="staff-department" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                            </div>
                            <div class="mb-4">
                                <label for="staff-role" class="block text-sm font-medium text-gray-700">Role</label>
                                <input type="text" id="staff-role" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                            </div>
                            <div class="flex justify-end space-x-3">
                                <button type="button" onclick="closeStaffModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">Cancel</button>
                                <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">Save</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Delete Confirmation Modal -->
            <div id="delete-staff-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
                <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
                    <div class="mt-3">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Confirm Delete</h3>
                        <p class="text-sm text-gray-500 mb-4">Are you sure you want to delete this staff member? This action cannot be undone.</p>
                        <div class="flex justify-end space-x-3">
                            <button onclick="closeDeleteStaffModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">Cancel</button>
                            <button id="confirm-delete-staff" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">Delete</button>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="mt-8 text-center text-xs text-gray-500 py-4 border-t border-gray-200">
                &copy; 2024 SchoolSys. All Rights Reserved.
            </footer>
        `;

      const classesSubjectsContent = `
            <h2 class="text-3xl font-extrabold text-gray-900 mb-6 fade-in">Classes & Subjects Catalog</h2>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- KPI Card: Total Classes -->
                <div class="bg-indigo-50 p-6 rounded-xl shadow-lg border-b-4 border-indigo-600 card-hover text-center">
                    <p class="text-sm font-medium text-indigo-700">Total Active Classes</p>
                    <p class="text-3xl font-bold text-indigo-900 mt-1">45</p>
                </div>
                <!-- KPI Card: Assigned Teachers -->
                <div class="bg-green-50 p-6 rounded-xl shadow-lg border-b-4 border-green-600 card-hover text-center">
                    <p class="text-sm font-medium text-green-700">Teachers Assigned</p>
                    <p class="text-3xl font-bold text-green-900 mt-1">32</p>
                </div>
                <!-- KPI Card: Core Subjects -->
                <div class="bg-yellow-50 p-6 rounded-xl shadow-lg border-b-4 border-yellow-600 card-hover text-center">
                    <p class="text-sm font-medium text-yellow-700">Elective Subjects</p>
                    <p class="text-3xl font-bold text-yellow-900 mt-1">10</p>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-lg mb-8 card-hover">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Current Class Sections</h3>
                <div class="overflow-x-auto">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="rounded-tl-xl">Class / Section</th>
                                <th>Subject</th>
                                <th>Teacher</th>
                                <th>Students</th>
                                <th class="rounded-tr-xl">Schedule</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium text-gray-900">Grade 9 A</td>
                                <td class="text-gray-500">English Literature</td>
                                <td class="text-blue-600 font-medium">Ms. Smith</td>
                                <td class="text-gray-500">30</td>
                                <td class="text-gray-500">Mon/Wed 9:00 AM</td>
                            </tr>
                            <tr>
                                <td class="font-medium text-gray-900">Grade 11 B</td>
                                <td class="text-gray-500">AP Calculus</td>
                                <td class="text-blue-600 font-medium">Mr. Kelly</td>
                                <td class="text-gray-500">25</td>
                                <td class="text-gray-500">Tue/Thu 1:00 PM</td>
                            </tr>
                            <tr>
                                <td class="font-medium text-gray-900">Grade 8</td>
                                <td class="text-gray-500">World History</td>
                                <td class="text-blue-600 font-medium">Mr. Chen</td>
                                <td class="text-gray-500">40</td>
                                <td class="text-gray-500">Daily 11:00 AM</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-lg card-hover">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Subject Distribution</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-blue-50 p-4 rounded-lg text-center">
                        <p class="text-lg font-bold text-blue-800">12</p>
                        <p class="text-sm text-blue-600">Science Subjects</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg text-center">
                        <p class="text-lg font-bold text-green-800">8</p>
                        <p class="text-sm text-green-600">Arts Subjects</p>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg text-center">
                        <p class="text-lg font-bold text-purple-800">15</p>
                        <p class="text-sm text-purple-600">Core Subjects</p>
                    </div>
                    <div class="bg-orange-50 p-4 rounded-lg text-center">
                        <p class="text-lg font-bold text-orange-800">10</p>
                        <p class="text-sm text-orange-600">Elective Subjects</p>
                    </div>
                </div>
            </div>

            <footer class="mt-8 text-center text-xs text-gray-500 py-4 border-t border-gray-200">
                &copy; 2024 SchoolSys. All Rights Reserved.
            </footer>
        `;

      const attendanceContent = `
            <h2 class="text-3xl font-extrabold text-gray-900 mb-6 fade-in">Daily Attendance Overview</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Card: Present -->
                <div class="bg-green-50 p-6 rounded-xl shadow-lg border-b-4 border-green-600 text-center card-hover">
                    <p class="text-sm font-medium text-green-700">Students Present Today</p>
                    <p class="text-5xl font-extrabold text-green-900 mt-1">1401</p>
                </div>
                <!-- Card: Absent -->
                <div class="bg-red-50 p-6 rounded-xl shadow-lg border-b-4 border-red-600 text-center card-hover">
                    <p class="text-sm font-medium text-red-700">Students Absent Today</p>
                    <p class="text-5xl font-extrabold text-red-900 mt-1">51</p>
                </div>
                <!-- Card: Overall Rate -->
                <div class="bg-blue-50 p-6 rounded-xl shadow-lg border-b-4 border-blue-600 text-center card-hover">
                    <p class="text-sm font-medium text-blue-700">Overall Monthly Rate</p>
                    <p class="text-5xl font-extrabold text-blue-900 mt-1">96.5%</p>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-lg mb-8 card-hover">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold text-gray-800">Attendance Register</h3>
                    <button class="bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 transition duration-150 flex items-center shadow-md">
                        <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Record Attendance
                    </button>
                </div>

                <div class="overflow-x-auto">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Class / Grade</th>
                                <th>Present</th>
                                <th>Absent</th>
                                <th>Details</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium text-gray-900">2024-10-01</td>
                                <td class="text-gray-500">Grade 10</td>
                                <td class="text-green-600 font-medium">120 / 122</td>
                                <td class="text-red-600">2</td>
                                <td><button class="text-indigo-600 hover:text-indigo-900">View Log</button></td>
                            </tr>
                            <tr>
                                <td class="font-medium text-gray-900">2024-10-01</td>
                                <td class="text-gray-500">Grade 9</td>
                                <td class="text-green-600 font-medium">115 / 125</td>
                                <td class="text-red-600">10</td>
                                <td><button class="text-indigo-600 hover:text-indigo-900">View Log</button></td>
                            </tr>
                            <tr>
                                <td class="font-medium text-gray-900">2024-09-30</td>
                                <td class="text-gray-500">Grade 11</td>
                                <td class="text-green-600 font-medium">118 / 120</td>
                                <td class="text-red-600">2</td>
                                <td><button class="text-indigo-600 hover:text-indigo-900">View Log</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-lg card-hover">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Weekly Attendance Trend</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-600">Monday</span>
                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                <div class="bg-green-600 h-2 rounded-full" style="width: 95%"></div>
                            </div>
                            <span class="text-sm font-medium text-gray-700">95%</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-600">Tuesday</span>
                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                <div class="bg-green-600 h-2 rounded-full" style="width: 97%"></div>
                            </div>
                            <span class="text-sm font-medium text-gray-700">97%</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-600">Wednesday</span>
                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                <div class="bg-yellow-500 h-2 rounded-full" style="width: 88%"></div>
                            </div>
                            <span class="text-sm font-medium text-gray-700">88%</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-lg card-hover">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Top Classes by Attendance</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                            <span class="font-medium text-green-800">Grade 7A</span>
                            <span class="font-bold text-green-600">98.2%</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                            <span class="font-medium text-blue-800">Grade 10B</span>
                            <span class="font-bold text-blue-600">97.8%</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg">
                            <span class="font-medium text-yellow-800">Grade 8C</span>
                            <span class="font-bold text-yellow-600">96.5%</span>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="mt-8 text-center text-xs text-gray-500 py-4 border-t border-gray-200">
                &copy; 2024 SchoolSys. All Rights Reserved.
            </footer>
        `;

      const reportsContent = `
            <h2 class="text-3xl font-extrabold text-gray-900 mb-6 fade-in">School Reports & Analytics</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Academic Reports -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-blue-500 card-hover">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center space-x-2">
                        <svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-4 0h6m-6 0h-2"></path>
                        </svg>
                        <span>Academic Performance</span>
                    </h3>
                    <ul class="space-y-3">
                        <li class="p-3 bg-blue-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-blue-800">Q3 Grade Distribution Report</span>
                            <button class="text-xs text-blue-600 font-medium hover:underline">Generate</button>
                        </li>
                        <li class="p-3 bg-blue-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-blue-800">Student Improvement Analysis (2023)</span>
                            <button class="text-xs text-blue-600 font-medium hover:underline">Download PDF</button>
                        </li>
                        <li class="p-3 bg-blue-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-blue-800">Final Exam Results Summary</span>
                            <button class="text-xs text-blue-600 font-medium hover:underline">View Live</button>
                        </li>
                    </ul>
                </div>

                <!-- Financial Reports -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-green-500 card-hover">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center space-x-2">
                        <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                        <span>Financial Overviews</span>
                    </h3>
                    <ul class="space-y-3">
                        <li class="p-3 bg-green-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-green-800">Monthly Fee Collection Summary</span>
                            <button class="text-xs text-green-600 font-medium hover:underline">View Live</button>
                        </li>
                        <li class="p-3 bg-green-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-green-800">Annual Budget Report 2024/2025</span>
                            <button class="text-xs text-green-600 font-medium hover:underline">Download XLSX</button>
                        </li>
                        <li class="p-3 bg-green-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-green-800">Expense Tracking Dashboard</span>
                            <button class="text-xs text-green-600 font-medium hover:underline">Access</button>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Operational Reports -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-purple-500 card-hover">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center space-x-2">
                        <svg class="w-6 h-6 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                        </svg>
                        <span>Operational Reports</span>
                    </h3>
                    <ul class="space-y-3">
                        <li class="p-3 bg-purple-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-purple-800">Staff Performance Review</span>
                            <button class="text-xs text-purple-600 font-medium hover:underline">Generate</button>
                        </li>
                        <li class="p-3 bg-purple-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-purple-800">Facility Usage Statistics</span>
                            <button class="text-xs text-purple-600 font-medium hover:underline">View</button>
                        </li>
                        <li class="p-3 bg-purple-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-purple-800">Library Activity Report</span>
                            <button class="text-xs text-purple-600 font-medium hover:underline">Download</button>
                        </li>
                    </ul>
                </div>

                <!-- Custom Reports -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-orange-500 card-hover">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center space-x-2">
                        <svg class="w-6 h-6 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                        </svg>
                        <span>Custom Reports</span>
                    </h3>
                    <ul class="space-y-3">
                        <li class="p-3 bg-orange-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-orange-800">Create Custom Report</span>
                            <button class="text-xs text-orange-600 font-medium hover:underline">New Report</button>
                        </li>
                        <li class="p-3 bg-orange-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-orange-800">Saved Report Templates</span>
                            <button class="text-xs text-orange-600 font-medium hover:underline">Browse</button>
                        </li>
                        <li class="p-3 bg-orange-50 rounded-lg flex justify-between items-center">
                            <span class="text-sm text-orange-800">Data Export Options</span>
                            <button class="text-xs text-orange-600 font-medium hover:underline">Configure</button>
                        </li>
                    </ul>
                </div>
            </div>

            <footer class="mt-8 text-center text-xs text-gray-500 py-4 border-t border-gray-200">
                &copy; 2024 SchoolSys. All Rights Reserved.
            </footer>
        `;

      const libraryContent = `
            <h2 class="text-3xl font-extrabold text-gray-900 mb-6 fade-in">Library Management System</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Card: Total Books -->
                <div class="bg-purple-50 p-6 rounded-xl shadow-lg border-l-4 border-purple-600 card-hover">
                    <p class="text-sm font-medium text-purple-700">Total Books in Stock</p>
                    <p class="text-4xl font-bold text-purple-900 mt-1">15,840</p>
                </div>
                <!-- Card: Currently Borrowed -->
                <div class="bg-red-50 p-6 rounded-xl shadow-lg border-l-4 border-red-600 card-hover">
                    <p class="text-sm font-medium text-red-700">Currently Borrowed</p>
                    <p class="text-4xl font-bold text-red-900 mt-1">1,203</p>
                </div>
                <!-- Card: Overdue -->
                <div class="bg-yellow-50 p-6 rounded-xl shadow-lg border-l-4 border-yellow-600 card-hover">
                    <p class="text-sm font-medium text-yellow-700">Overdue Items</p>
                    <p class="text-4xl font-bold text-yellow-900 mt-1">45</p>
                </div>
            </div>
            
            <div class="bg-white p-6 rounded-xl shadow-lg mb-8 card-hover">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Recent Borrowing Activity</h3>
                <div class="overflow-x-auto">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Book Title</th>
                                <th>Borrower</th>
                                <th>Due Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium text-gray-900">The Great Gatsby</td>
                                <td class="text-gray-500">S0045 - M. Lopez</td>
                                <td class="text-gray-500">2024-10-15</td>
                                <td>
                                    <span class="status-badge status-on-loan">On Loan</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="font-medium text-gray-900">A Brief History of Time</td>
                                <td class="text-gray-500">T005 - Ms. Smith</td>
                                <td class="text-red-600 font-medium">2024-09-28</td>
                                <td>
                                    <span class="status-badge status-overdue">Overdue</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="font-medium text-gray-900">To Kill a Mockingbird</td>
                                <td class="text-gray-500">S0123 - J. Wilson</td>
                                <td class="text-gray-500">2024-10-20</td>
                                <td>
                                    <span class="status-badge status-on-loan">On Loan</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-lg card-hover">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Popular Book Categories</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">Fiction</span>
                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: 65%"></div>
                            </div>
                            <span class="text-sm font-medium text-gray-700">65%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">Science & Technology</span>
                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                <div class="bg-green-600 h-2 rounded-full" style="width: 45%"></div>
                            </div>
                            <span class="text-sm font-medium text-gray-700">45%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">History</span>
                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                <div class="bg-purple-600 h-2 rounded-full" style="width: 30%"></div>
                            </div>
                            <span class="text-sm font-medium text-gray-700">30%</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-lg card-hover">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Quick Library Actions</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="p-3 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition duration-150 flex flex-col items-center">
                            <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            <span class="text-sm font-medium">Add Book</span>
                        </button>
                        <button class="p-3 bg-green-50 text-green-600 rounded-lg hover:bg-green-100 transition duration-150 flex flex-col items-center">
                            <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            <span class="text-sm font-medium">Check Out</span>
                        </button>
                        <button class="p-3 bg-yellow-50 text-yellow-600 rounded-lg hover:bg-yellow-100 transition duration-150 flex flex-col items-center">
                            <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                            <span class="text-sm font-medium">Return</span>
                        </button>
                        <button class="p-3 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition duration-150 flex flex-col items-center">
                            <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            <span class="text-sm font-medium">Search</span>
                        </button>
                    </div>
                </div>
            </div>

            <footer class="mt-8 text-center text-xs text-gray-500 py-4 border-t border-gray-200">
                &copy; 2024 SchoolSys. All Rights Reserved.
            </footer>
`;

      const smsContent = `
            <h2 class="text-3xl font-extrabold text-gray-900 mb-6 fade-in">SMS Messaging</h2>
            <div class="bg-white p-6 rounded-xl shadow-lg mb-8 card-hover">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Send SMS</h3>
                <form id="sms-form" class="space-y-4">
                    <div>
                        <label for="recipient" class="block text-sm font-medium text-gray-700">Recipient</label>
                        <select id="recipient" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="all">All Students</option>
                            <option value="staff">All Staff</option>
                            <option value="selected">Selected Recipients</option>
                        </select>
                    </div>
                    <div id="selected-recipients" class="hidden">
                        <label for="recipients-list" class="block text-sm font-medium text-gray-700">Select Recipients</label>
                        <textarea id="recipients-list" rows="3" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter phone numbers separated by commas (e.g., +1234567890, +0987654321)"></textarea>
                    </div>
                    <div>
                        <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
                        <textarea id="message" rows="4" maxlength="160" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter your message (max 160 characters)"></textarea>
                        <p id="char-count" class="text-xs text-gray-500 mt-1">0 / 160 characters</p>
                    </div>
                    <button type="submit" class="bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-150">
                        Send SMS
                    </button>
                </form>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg card-hover">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">SMS History</h3>
                <div class="overflow-x-auto">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Recipient</th>
                                <th>Message</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="sms-history-body">
                            <tr>
                                <td class="font-medium text-gray-900">2024-10-01</td>
                                <td class="text-gray-500">All Students</td>
                                <td class="text-gray-500">School closed tomorrow</td>
                                <td class="text-green-600">Sent</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <footer class="mt-8 text-center text-xs text-gray-500 py-4 border-t border-gray-200">
                &copy; 2024 SchoolSys. All Rights Reserved.
            </footer>
        `;

      const pages = {
        Dashboard: dashboardContent,
        Students: studentsContent,
        "Staff & Teachers": staffContent,
        "Classes & Subjects": classesSubjectsContent,
        Attendance: attendanceContent,
        Reports: reportsContent,
        Library: libraryContent,
        SMS: smsContent,
      };

      let currentPage = "Dashboard";

      // Navigation functions
      function updateNav(activePage) {
        document.querySelectorAll(".nav-link").forEach((link) => {
          const isCurrent = link.dataset.page === activePage;

          if (isCurrent) {
            link.className = "nav-link nav-link-active";
          } else {
            link.className = "nav-link nav-link-default";
          }
        });
      }

      function loadPage(pageName) {
        // Hide sidebar on mobile after clicking a link
        if (window.innerWidth < 1024) {
          toggleSidebar();
        }

        const contentArea = document.getElementById("content-area");
        const pageTitle = document.getElementById("page-title");

        // Set the new page title in the header
        pageTitle.textContent = pageName;

        // Apply smooth fade-out transition
        contentArea.classList.add("page-content-transition");

        // Wait for fade-out before injecting new content
        setTimeout(() => {
          // Get content from templates
          const content = pages[pageName];
          contentArea.innerHTML = content;

          // Add Students specific event listeners
          if (pageName === "Students") {
            document
              .getElementById("student-form")
              .addEventListener("submit", function (e) {
                e.preventDefault();
                const editIndex = this.dataset.editIndex;
                const student = {
                  name: document.getElementById("student-name").value,
                  id: document.getElementById("student-id").value,
                  class: document.getElementById("student-class").value,
                  attendance: parseInt(
                    document.getElementById("student-attendance").value
                  ),
                };
                if (editIndex !== "") {
                  students[parseInt(editIndex)] = student;
                } else {
                  students.push(student);
                }
                saveStudents();
                renderStudentsTable();
                closeStudentModal();
              });
            renderStudentsTable();
          }

          // Add SMS specific event listeners
          if (pageName === "SMS") {
            const recipientSelect = document.getElementById("recipient");
            const selectedRecipients = document.getElementById(
              "selected-recipients"
            );
            const messageTextarea = document.getElementById("message");
            const charCount = document.getElementById("char-count");
            const smsForm = document.getElementById("sms-form");
            const smsHistoryBody = document.getElementById("sms-history-body");

            // Load SMS history from localStorage
            let smsHistory =
              JSON.parse(localStorage.getItem("smsHistory")) || [];

            function renderSmsHistory() {
              smsHistoryBody.innerHTML = "";
              smsHistory.forEach((sms, index) => {
                const row = document.createElement("tr");
                row.innerHTML = `
                        <td class="font-medium text-gray-900">${sms.date}</td>
                        <td class="text-gray-500">${sms.recipient}</td>
                        <td class="text-gray-500">${sms.message}</td>
                        <td class="text-${
                          sms.status === "Sent" ? "green" : "red"
                        }-600">${sms.status}</td>
                    `;
                smsHistoryBody.appendChild(row);
              });
            }

            // Initial render
            renderSmsHistory();

            recipientSelect.addEventListener("change", function () {
              if (this.value === "selected") {
                selectedRecipients.classList.remove("hidden");
              } else {
                selectedRecipients.classList.add("hidden");
              }
            });

            messageTextarea.addEventListener("input", function () {
              const length = this.value.length;
              charCount.textContent = `${length} / 160 characters`;
              if (length > 160) {
                this.value = this.value.substring(0, 160);
                charCount.textContent = "160 / 160 characters";
              }
            });

            smsForm.addEventListener("submit", function (e) {
              e.preventDefault();
              const recipient = recipientSelect.value;
              const message = messageTextarea.value.trim();
              let recipientsList = "";

              if (!message) {
                alert("Please enter a message.");
                return;
              }

              if (recipient === "selected") {
                recipientsList = document
                  .getElementById("recipients-list")
                  .value.trim();
                if (!recipientsList) {
                  alert("Please enter recipients.");
                  return;
                }
                // Basic validation for phone numbers
                const phones = recipientsList.split(",").map((p) => p.trim());
                const phoneRegex = /^\+\d{10,15}$/;
                if (!phones.every((p) => phoneRegex.test(p))) {
                  alert(
                    "Please enter valid phone numbers (e.g., +1234567890)."
                  );
                  return;
                }
              } else {
                recipientsList =
                  recipient === "all" ? "All Students" : "All Staff";
              }

              // Simulate sending (in real app, this would be an API call)
              const newSms = {
                date: new Date().toISOString().split("T")[0],
                recipient: recipientsList,
                message: message,
                status: "Sent",
              };

              smsHistory.unshift(newSms); // Add to beginning
              localStorage.setItem("smsHistory", JSON.stringify(smsHistory));
              renderSmsHistory();

              // Reset form
              smsForm.reset();
              selectedRecipients.classList.add("hidden");
              charCount.textContent = "0 / 160 characters";

              alert("SMS sent successfully!");
            });
          }

          // Scroll content to top
          contentArea.scrollTop = 0;

          // Update navigation visual state
          updateNav(pageName);
          currentPage = pageName;

          // Apply smooth fade-in
          setTimeout(() => {
            contentArea.classList.remove("page-content-transition");
          }, 50);
        }, 200);
      }

      function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        const overlay = document.getElementById("sidebar-overlay");

        if (sidebar.classList.contains("sidebar-open")) {
          sidebar.classList.remove("sidebar-open");
          overlay.style.display = "none";
          document.body.classList.remove("overflow-hidden");
        } else {
          sidebar.classList.add("sidebar-open");
          overlay.style.display = "block";
          document.body.classList.add("overflow-hidden");
        }
      }

      function toggleNotifications() {
        const dropdown = document.getElementById("notifications-dropdown");
        const userMenu = document.getElementById("user-menu");

        userMenu.style.display = "none";
        dropdown.style.display =
          dropdown.style.display === "block" ? "none" : "block";
      }

      function toggleUserMenu() {
        const dropdown = document.getElementById("user-menu");
        const notifications = document.getElementById("notifications-dropdown");

        notifications.style.display = "none";
        dropdown.style.display =
          dropdown.style.display === "block" ? "none" : "block";
      }

      // Close dropdowns when clicking outside
      document.addEventListener("click", function (event) {
        const notificationsBtn = document.getElementById("notification-btn");
        const notificationsDropdown = document.getElementById(
          "notifications-dropdown"
        );
        const userMenu = document.getElementById("user-menu");
        const userAvatar = document.querySelector(
          ".flex.items-center.space-x-2.cursor-pointer"
        );

        if (
          !notificationsBtn.contains(event.target) &&
          !notificationsDropdown.contains(event.target)
        ) {
          notificationsDropdown.style.display = "none";
        }

        if (
          !userAvatar.contains(event.target) &&
          !userMenu.contains(event.target)
        ) {
          userMenu.style.display = "none";
        }
      });

      // Logout function
      function logout() {
        localStorage.removeItem("loggedIn");
        window.location.href = "login.html";
      }

      // Initialize the dashboard directly
      window.onload = () => {
        // Check if user is logged in
        if (localStorage.getItem("loggedIn") !== "true") {
          window.location.href = "login.html";
        } else {
          loadPage("Dashboard");
        }
      };
    </script>
  </body>
</html>
